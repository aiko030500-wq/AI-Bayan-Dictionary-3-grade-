<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI BAYAN ‚Ä¢ Visual Vocabulary ‚Ä¢ Grade 3</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --green:#0b6f78;
  --green2:#0a5f67;
  --gold:#f3c84b;
  --bg:#eaf6f8;
  --ink:#0a3c42;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial;
  background:linear-gradient(180deg,var(--green),var(--green2));
}
.app{max-width:760px;margin:auto;padding:14px;color:#fff}
.card{
  background:#fff;
  color:var(--ink);
  border-radius:20px;
  padding:16px;
  margin-bottom:16px;
  border:3px solid var(--gold);
}
.center{text-align:center}
.logo{width:90px}
.btn{
  border:none;
  border-radius:14px;
  padding:12px 14px;
  font-weight:900;
  cursor:pointer;
}
.main{background:var(--green);color:#fff}
.light{background:#fff;border:2px solid var(--green);color:var(--green)}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.vocab{
  background:var(--bg);
  border-radius:16px;
  padding:10px;
  text-align:center;
}
.vocab img{width:100%;border-radius:12px}
.matchCard{
  background:var(--bg);
  border-radius:16px;
  padding:10px;
  border:3px solid transparent;
  position:relative;
}
.correct{border-color:#1aa06c}
.wrong{border-color:#d62828}
.icon{
  position:absolute;
  top:6px;
  right:8px;
  font-size:26px;
}
.star{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0);
  font-size:40px;
  animation:pop .6s ease forwards;
}
@keyframes pop{
  0%{transform:translate(-50%,-50%) scale(0)}
  60%{transform:translate(-50%,-50%) scale(1.3)}
  100%{transform:translate(-50%,-50%) scale(1)}
}
.footer{text-align:center;font-size:12px;font-weight:800;opacity:.85}
.print{display:none}

@media print{
  body{background:#fff}
  .btn,.footer{display:none}
  .print{display:block;text-align:center;font-weight:900;margin-top:40px}
}
</style>
</head>

<body>
<div class="app" id="app"></div>

<script>
/* ================= CONFIG ================= */
const STUDENT_PIN="2844";
const TEACHER_PIN="3234";
const MAX_STUDENTS=15;

/* ================= DATA ================= */
const UNIT1 = {
  unit:1,
  title:"Hello English",
  lessons:[
    {
      id:1,
      title:"Greetings",
      vocab:[
        {en:"hello",img:"img/unit1/lesson1/hello.png"},
        {en:"goodbye",img:"img/unit1/lesson1/goodbye.png"},
        {en:"how are you",img:"img/unit1/lesson1/how_are_you.png"},
        {en:"fine",img:"img/unit1/lesson1/fine.png"}
      ],
      grammar:"We say hello when we meet. We say goodbye when we leave.",
      reading:{
        text:"I am Tom. I say hello.",
        tf:[true,false]
      },
      song:true
    },
    {id:2,title:"My name",vocab:[],grammar:"What‚Äôs your name? I‚Äôm ‚Ä¶",reading:null,song:false},
    {id:3,title:"Alphabet",vocab:[],grammar:"Letters A‚ÄìD",reading:null,song:false},
    {id:4,title:"Numbers 1‚Äì10",vocab:[],grammar:"I‚Äôm + number",reading:null,song:false},
    {id:5,title:"Numbers 11‚Äì20",vocab:[],grammar:"I‚Äôm + number",reading:null,song:false},
    {id:6,title:"Colours",vocab:[],grammar:"It is + colour",reading:null,song:true},
    {id:7,title:"Countries",vocab:[],grammar:"I‚Äôm from ‚Ä¶",reading:null,song:false},
    {id:8,title:"About me",vocab:[],grammar:"My name is ‚Ä¶",reading:null,song:false}
  ]
};

/* ================= STATE ================= */
let user=null;
let role=null;
let stars=0;
let used=false;
let chatDate=localStorage.getItem("chatDate")||"";

/* ================= APP ================= */
const app=document.getElementById("app");

function loginScreen(){
app.innerHTML=`
<div class="card center">
<img src="logo.png" class="logo">
<h2>AI BAYAN</h2>
<input id="login" placeholder="3EL1" class="light"><br><br>
<input id="pin" type="password" placeholder="PIN" class="light"><br><br>
<button class="btn main" onclick="login()">ENTER</button>
</div>`;
}

function login(){
const l=login.value;
const p=pin.value;
if(p===STUDENT_PIN && /^3EL([1-9]|1[0-5])$/.test(l)){
user=l;role="student";menu();return;
}
if(p===TEACHER_PIN){
role="teacher";journal();return;
}
alert("Wrong login or PIN");
}

function menu(){
app.innerHTML=`
<div class="card center">
<img src="logo.png" class="logo">
<h2>AI BAYAN ‚Ä¢ Grade 3</h2>
<p>‚≠ê Stars: ${stars}</p>
</div>
<div class="card">
<button class="btn main" onclick="openUnit()">üìò Unit 1</button><br><br>
<button class="btn light" onclick="chat()">üí¨ AI Bayan Chat</button><br><br>
<button class="btn light" onclick="loginScreen()">üö™ Exit</button>
</div>
<div class="footer">AI BAYAN ‚Ä¢ Visual Vocabulary</div>`;
}

function openUnit(){
app.innerHTML=`
<div class="card center">
<h3>Unit 1 ‚Äî ${UNIT1.title}</h3>
</div>
${UNIT1.lessons.map(l=>`
<div class="card">
<button class="btn main" onclick="lesson(${l.id})">Lesson ${l.id}: ${l.title}</button>
</div>`).join("")}
<button class="btn light" onclick="menu()">‚Üê Back</button>`;
}

function lesson(id){
used=false;
const L=UNIT1.lessons.find(x=>x.id===id);
app.innerHTML=`
<div class="card center">
<img src="logo.png" class="logo">
<h3>Lesson ${id}: ${L.title}</h3>
<p>‚≠ê ${stars}</p>
</div>

<div class="card">
<h4>Vocabulary</h4>
<div class="grid">
${L.vocab.map(v=>`
<div class="vocab">
<img src="${v.img}">
<b>${v.en}</b>
</div>`).join("")}
</div>
</div>

<div class="card">
<h4>Grammar</h4>
<p>${L.grammar}</p>
</div>

<div class="card">
<h4>Worksheet ‚Äî Matching</h4>
<div class="grid">
${L.vocab.map((v,i)=>`
<div class="matchCard" id="m${i}">
<img src="${v.img}">
<select onchange="check(${i},'${v.en}',this)">
<option value="">choose</option>
${shuffle(L.vocab.map(x=>x.en)).map(o=>`<option>${o}</option>`).join("")}
</select>
</div>`).join("")}
</div>
</div>

${L.song?karaoke():""}

<div class="card">
<button class="btn main" onclick="finish()">Finish</button>
<button class="btn light" onclick="window.print()">üñ® Print</button>
</div>

<div class="print">AI BAYAN ‚Ä¢ 3 grade ‚Ä¢ 2025</div>`;
}

function check(i,ans,sel){
if(used)return;
const c=document.getElementById("m"+i);
if(sel.value===ans){
c.classList.add("correct");
c.innerHTML+=`<div class="icon">‚úÖ</div><div class="star">‚≠ê</div>`;
stars++;
}else{
c.classList.add("wrong");
c.innerHTML+=`<div class="icon">‚ùå</div>`;
}
sel.disabled=true;
}

function finish(){
used=true;
alert("Saved ‚≠ê");
menu();
}

function chat(){
const today=new Date().toDateString();
if(chatDate===today){
alert("Only 1 question per day");
return;
}
chatDate=today;
localStorage.setItem("chatDate",today);
alert("Hello! I am AI Bayan üòä");
}

function journal(){
app.innerHTML=`
<div class="card center">
<h3>Teacher Journal</h3>
<p>‚≠ê Total stars: ${stars}</p>
<button class="btn light" onclick="loginScreen()">Exit</button>
</div>`;
}

function karaoke(){
return `
<div class="card">
<h4>üéµ Song</h4>
<audio controls src="audio/unit1_lesson1_song.mp3"></audio>
</div>`;
}

function shuffle(a){return a.sort(()=>Math.random()-0.5);}

/* START */
loginScreen();
</script>
</body>
</html>

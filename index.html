<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Bayan Vocabulary 3 Grade</title>
  <style>
    :root{
      --bg:#0b6f78;
      --bg2:#0a5f67;
      --gold:#f3c84b;
      --card:#ffffff;
      --ink:#0c2a2f;
      --muted:#5b6b70;
      --btn:#ffffff;
      --btnBorder:#0c6a73;
      --shadow:0 10px 25px rgba(0,0,0,.12);
      --radius:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg,var(--bg),var(--bg2));
      color:#fff;
    }
    a{color:inherit;text-decoration:none}
    .app{
      max-width: 760px;
      margin: 0 auto;
      min-height: 100vh;
      padding-bottom: 34px;
    }

    /* TOP HERO */
    .hero{
      padding: 28px 18px 16px;
      text-align:center;
    }
    .logoWrap{
      width:170px;height:170px;
      margin:0 auto 14px;
      border-radius:999px;
      background: radial-gradient(circle at 50% 40%, #fff 0 62%, rgba(255,255,255,.15) 63% 100%);
      border: 6px solid rgba(243,200,75,.95);
      box-shadow: 0 12px 25px rgba(0,0,0,.25);
      display:flex;align-items:center;justify-content:center;
      overflow:hidden;
    }
    .logoWrap img{width:100%;height:100%;object-fit:cover;display:block}
    .brandTitle{
      font-weight: 900;
      letter-spacing: .8px;
      font-size: 34px;
      line-height: 1.1;
      color: var(--gold);
      text-transform: uppercase;
      text-shadow: 0 4px 10px rgba(0,0,0,.25);
    }
    .brandSub{
      margin-top:6px;
      font-weight: 800;
      opacity:.95;
      font-size: 16px;
      letter-spacing:.6px;
    }

    /* WHITE PANEL */
    .panel{
      margin: 14px 14px 28px;
      background: #fff;
      border-radius: 26px;
      padding: 14px 14px 18px;
      box-shadow: var(--shadow);
      color: var(--ink);
      border: 3px solid rgba(243,200,75,.65);
    }
    .helloCard{
      background: linear-gradient(180deg,#ffffff,#f4fbfc);
      border-radius: 18px;
      padding: 14px 14px;
      text-align:center;
      border: 2px solid rgba(12,106,115,.20);
      margin-bottom: 12px;
    }
    .helloCard .big{
      font-size: 22px;
      font-weight: 900;
      margin-bottom: 4px;
      color:#0b4f56;
    }
    .helloCard .starsLine{
      font-weight: 800;
      color:#134a50;
    }

    /* MENU BUTTONS */
    .menuList{display:flex;flex-direction:column;gap:14px;margin-top:10px}
    .menuBtn{
      background: var(--btn);
      border-radius: 22px;
      padding: 18px 16px;
      font-size: 20px;
      font-weight: 900;
      text-align:center;
      border: 3px solid rgba(12,106,115,.55);
      color:#0a4a52;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      user-select:none;
    }
    .menuBtn:active{transform: scale(.99)}
    .menuBtn small{display:block;font-weight:700;color:#30666d;margin-top:2px;font-size:13px}

    /* BOTTOM MINI BUTTONS */
    .bottomRow{
      margin-top: 16px;
      display:flex;
      gap: 12px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .miniBtn{
      background:#fff;
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 900;
      border: 3px solid rgba(12,106,115,.55);
      color:#0a4a52;
      min-width: 170px;
      text-align:center;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
    }

    /* AUTH SCREEN */
    .auth{
      max-width: 520px;
      margin: 0 auto;
      padding: 16px 0 0;
    }
    .authBox{
      background:#fff;
      border-radius: 22px;
      padding: 16px;
      border: 3px solid rgba(243,200,75,.55);
      box-shadow: var(--shadow);
      color: var(--ink);
    }
    .field{margin:10px 0}
    .label{font-weight:900;color:#0a4a52;margin-bottom:6px}
    .input{
      width:100%;
      padding: 13px 12px;
      border-radius: 14px;
      border: 2px solid rgba(12,106,115,.25);
      outline:none;
      font-size: 16px;
    }
    .row{
      display:flex;gap:10px;flex-wrap:wrap;
    }
    .row .btn{
      flex:1;
      min-width: 180px;
    }
    .btn{
      border:none;
      border-radius: 16px;
      padding: 14px 14px;
      font-weight: 900;
      font-size: 16px;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
    }
    .btnPrimary{
      background: linear-gradient(180deg,#0d7a83,#0b6168);
      color:#fff;
    }
    .btnGhost{
      background:#fff;
      border: 3px solid rgba(12,106,115,.55);
      color:#0a4a52;
    }
    .note{
      margin-top:10px;
      color:#567277;
      font-size: 13px;
      font-weight: 700;
      text-align:center;
    }

    /* LESSON PAGE */
    .lessonHero{
      padding: 16px 14px 0;
      color:#fff;
    }
    .lessonBanner{
      border-radius: 26px;
      padding: 18px 16px;
      background: linear-gradient(90deg,#1a8d97,#0b6f78);
      border: 3px solid rgba(243,200,75,.65);
      box-shadow: 0 12px 25px rgba(0,0,0,.16);
      display:flex;
      gap: 14px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .lessonBanner .title{
      font-size: 22px;
      font-weight: 1000;
      letter-spacing:.2px;
    }
    .lessonBanner .sub{
      font-size: 14px;
      font-weight: 800;
      opacity:.95;
      margin-top:4px;
    }
    .badge{
      background: rgba(255,255,255,.18);
      border: 2px solid rgba(255,255,255,.22);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 900;
      white-space:nowrap;
    }
    .lessonPanel{
      margin: 12px 14px 28px;
      background:#fff;
      color:var(--ink);
      border-radius: 26px;
      padding: 14px;
      border: 3px solid rgba(243,200,75,.65);
      box-shadow: var(--shadow);
    }
    .sectionTitle{
      display:flex;align-items:center;gap:10px;
      padding: 12px 12px;
      background: linear-gradient(90deg,#0b6f78,#15909b);
      color:#fff;
      border-radius: 18px;
      font-weight: 1000;
      font-size: 16px;
      margin: 10px 0 12px;
      border: 2px solid rgba(0,0,0,.06);
    }
    .vocabGrid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }
    .vCard{
      background: #eef9fb;
      border-radius: 18px;
      padding: 12px;
      border: 2px solid rgba(12,106,115,.18);
      text-align:center;
    }
    .vIcon{
      width:72px;height:72px;border-radius:16px;
      background:#fff;
      margin: 0 auto 8px;
      display:flex;align-items:center;justify-content:center;
      border: 2px solid rgba(0,0,0,.06);
      font-size: 36px;
    }
    .vWord{font-weight:1000;font-size:20px;color:#0a4a52;text-transform:lowercase}
    .vRu{font-weight:900;color:#3d6167;margin-top:2px}
    .sayBtn{
      margin-top:10px;
      border:none;
      background: linear-gradient(180deg,#0b6f78,#0a5b62);
      color:#fff;
      padding: 10px 12px;
      border-radius: 999px;
      font-weight: 1000;
      cursor:pointer;
      width: 100%;
    }
    .ruleBox{
      background:#eaf6ff;
      border: 2px solid rgba(40,120,190,.20);
      border-radius: 18px;
      padding: 14px;
      color:#103a4a;
    }
    .ruleBox h3{margin:0 0 8px;font-size:18px}
    .ruleBox p{margin:6px 0;font-weight:700;color:#285463}
    .ruleBox ul{margin:8px 0 0 18px}
    .ruleBox li{margin:6px 0;font-weight:800}

    .wsBox{
      border-radius: 18px;
      border: 2px dashed rgba(0,0,0,.25);
      padding: 12px;
      margin: 12px 0;
      background:#fff;
    }
    .wsBox h4{margin:0 0 6px;font-size:18px;color:#0a4a52}
    .wsBox p{margin:0 0 10px;color:#4b666c;font-weight:700}
    .qRow{display:flex;gap:10px;align-items:center;margin:8px 0;flex-wrap:wrap}
    .qRow .q{font-weight:900}
    .qRow input[type="text"]{
      flex:1;min-width: 160px;
      padding: 10px 10px;
      border-radius: 12px;
      border: 2px solid rgba(12,106,115,.22);
      outline:none;
    }
    .select{
      flex:1;min-width: 200px;
      padding: 10px 10px;
      border-radius: 12px;
      border: 2px solid rgba(12,106,115,.22);
      outline:none;
      background:#fff;
      font-weight:800;
    }
    .checkRow{
      display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
      margin-top: 10px;
    }
    .checkBtn{
      border:none;
      background: linear-gradient(180deg,#0b6f78,#0a5b62);
      color:#fff;
      padding: 12px 14px;
      border-radius: 16px;
      font-weight: 1000;
      cursor:pointer;
      min-width: 140px;
    }
    .scoreTxt{font-weight:1000;color:#0a4a52}

    .navRow{
      display:flex;gap:12px;justify-content:space-between;flex-wrap:wrap;margin-top: 14px;
    }
    .navRow .btn{flex:1;min-width: 160px}
    .btnBlue{
      background: linear-gradient(180deg,#1f7bd0,#195a9e);
      color:#fff;
    }
    .btnGreen{
      background: linear-gradient(180deg,#1aa06c,#137e53);
      color:#fff;
    }

    .footerLine{
      margin-top: 12px;
      text-align:center;
      font-size: 12px;
      font-weight: 900;
      color: rgba(255,255,255,.90);
      padding: 12px 10px 0;
    }

    @media (max-width:520px){
      .brandTitle{font-size:28px}
      .menuBtn{font-size:18px}
      .vocabGrid{grid-template-columns:1fr 1fr}
    }
  </style>
</head>
<body>
  <div class="app" id="app"></div>

<script>
/* ===============================
   CONFIG
================================ */
const APP_TITLE = "AI Bayan Vocabulary 3 Grade";
const STUDENT_PIN = "2844";
const TEACHER_PIN = "3244";
const CLASS_CODE = "3E";
const MAX_L = 15;

  /* ===============================
   Unit 1 ‚Äì Hello English!
================================ */
const UNIT1_LESSONS = [
  { id:"u1l1", title:"Lesson 1", subtitle:"Hello, hello!", vocabTopic:"Greetings", vocab:[
    {en:"hello", ru:"–ø—Ä–∏–≤–µ—Ç", emoji:"üëã"},
    {en:"goodbye", ru:"–ø–æ–∫–∞", emoji:"üëã"},
    {en:"how are you?", ru:"–∫–∞–∫ –¥–µ–ª–∞?", emoji:"üòä"},
    {en:"fine, thank you", ru:"—Ö–æ—Ä–æ—à–æ, —Å–ø–∞—Å–∏–±–æ", emoji:"üëç"},
  ],
  grammar:{
    title:"Hello / Goodbye",
    rule:"We say hello when we meet. We say goodbye when we leave.",
    formula:"Hello! / Goodbye!",
    examples:["Hello! I‚Äôm Tom.","Goodbye! See you!"]
  }},
  { id:"u1l2", title:"Lesson 2", subtitle:"My name is‚Ä¶", vocabTopic:"Names", vocab:[
    {en:"my name is‚Ä¶", ru:"–º–µ–Ω—è –∑–æ–≤—É—Ç‚Ä¶", emoji:"üßí"},
    {en:"what‚Äôs your name?", ru:"–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?", emoji:"‚ùì"},
    {en:"I‚Äôm‚Ä¶", ru:"—è‚Ä¶", emoji:"üôã‚Äç‚ôÄÔ∏è"},
    {en:"this is‚Ä¶", ru:"—ç—Ç–æ‚Ä¶", emoji:"üëâ"},
  ],
  grammar:{
    title:"What‚Äôs your name?",
    rule:"We ask and answer about names.",
    formula:"What‚Äôs your name? ‚Äî I‚Äôm ‚Ä¶",
    examples:["What‚Äôs your name? ‚Äî I‚Äôm Aisha."]
  }},
  { id:"u1l3", title:"Lesson 3", subtitle:"The alphabet", vocabTopic:"Alphabet", vocab:[
    {en:"A", ru:"—ç–π", emoji:"üÖ∞Ô∏è"},
    {en:"B", ru:"–±–∏", emoji:"üÖ±Ô∏è"},
    {en:"C", ru:"—Å–∏", emoji:"üåä"},
    {en:"D", ru:"–¥–∏", emoji:"üî§"},
  ],
  grammar:{
    title:"Spell your name",
    rule:"We spell names using letters.",
    formula:"A ‚Äì B ‚Äì C",
    examples:["A ‚Äì I ‚Äì S ‚Äì H ‚Äì A"]
  }},
  { id:"u1l4", title:"Lesson 4", subtitle:"Numbers 1‚Äì10", vocabTopic:"Numbers", vocab:[
    {en:"one", ru:"–æ–¥–∏–Ω", emoji:"1Ô∏è‚É£"},
    {en:"two", ru:"–¥–≤–∞", emoji:"2Ô∏è‚É£"},
    {en:"three", ru:"—Ç—Ä–∏", emoji:"3Ô∏è‚É£"},
    {en:"ten", ru:"–¥–µ—Å—è—Ç—å", emoji:"üîü"},
  ],
  grammar:{
    title:"How old are you?",
    rule:"We ask about age.",
    formula:"How old are you? ‚Äî I‚Äôm ‚Ä¶",
    examples:["I‚Äôm eight."]
  }},
  { id:"u1l5", title:"Lesson 5", subtitle:"Numbers 11‚Äì20", vocabTopic:"Numbers", vocab:[
    {en:"eleven", ru:"–æ–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç—å", emoji:"1Ô∏è‚É£1Ô∏è‚É£"},
    {en:"twelve", ru:"–¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å", emoji:"1Ô∏è‚É£2Ô∏è‚É£"},
    {en:"fifteen", ru:"–ø—è—Ç–Ω–∞–¥—Ü–∞—Ç—å", emoji:"1Ô∏è‚É£5Ô∏è‚É£"},
    {en:"twenty", ru:"–¥–≤–∞–¥—Ü–∞—Ç—å", emoji:"2Ô∏è‚É£0Ô∏è‚É£"},
  ],
  grammar:{
    title:"I‚Äôm ‚Ä¶",
    rule:"We say age with numbers.",
    formula:"I‚Äôm + number",
    examples:["I‚Äôm twelve."]
  }},
  { id:"u1l6", title:"Lesson 6", subtitle:"Colours", vocabTopic:"Colours", vocab:[
    {en:"red", ru:"–∫—Ä–∞—Å–Ω—ã–π", emoji:"üü•"},
    {en:"blue", ru:"—Å–∏–Ω–∏–π", emoji:"üü¶"},
    {en:"green", ru:"–∑–µ–ª—ë–Ω—ã–π", emoji:"üü©"},
    {en:"yellow", ru:"–∂—ë–ª—Ç—ã–π", emoji:"üü®"},
  ],
  grammar:{
    title:"This is ‚Ä¶",
    rule:"We name colours.",
    formula:"This is + colour",
    examples:["This is red."]
  }},
  { id:"u1l7", title:"Lesson 7", subtitle:"Where are you from?", vocabTopic:"Countries", vocab:[
    {en:"I‚Äôm from Kazakhstan", ru:"—è –∏–∑ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞", emoji:"üá∞üáø"},
    {en:"I‚Äôm from the UK", ru:"—è –∏–∑ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏", emoji:"üá¨üáß"},
    {en:"I‚Äôm from Russia", ru:"—è –∏–∑ –†–æ—Å—Å–∏–∏", emoji:"üá∑üá∫"},
    {en:"I‚Äôm from the USA", ru:"—è –∏–∑ –°–®–ê", emoji:"üá∫üá∏"},
  ],
  grammar:{
    title:"Where are you from?",
    rule:"We talk about countries.",
    formula:"I‚Äôm from ‚Ä¶",
    examples:["I‚Äôm from Kazakhstan."]
  }},
  { id:"u1l8", title:"Project", subtitle:"My poster", vocabTopic:"Poster", vocab:[
    {en:"name", ru:"–∏–º—è", emoji:"üè∑Ô∏è"},
    {en:"age", ru:"–≤–æ–∑—Ä–∞—Å—Ç", emoji:"üéÇ"},
    {en:"country", ru:"—Å—Ç—Ä–∞–Ω–∞", emoji:"üåç"},
    {en:"favourite colour", ru:"–ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç", emoji:"üé®"},
  ],
  grammar:{
    title:"My poster",
    rule:"We write about ourselves.",
    formula:"My name‚Äôs ‚Ä¶ I‚Äôm ‚Ä¶",
    examples:["My name‚Äôs Aigerim. I‚Äôm ten."]
  }},
];

/* ===============================
   Unit 2 ‚Äì My school
================================ */
const UNIT2_LESSONS = [
  {id:"u2l1",title:"Lesson 1",subtitle:"Classroom",vocabTopic:"Things",vocab:[
    {en:"book",ru:"–∫–Ω–∏–≥–∞",emoji:"üìò"},
    {en:"pen",ru:"—Ä—É—á–∫–∞",emoji:"üñäÔ∏è"},
    {en:"pencil",ru:"–∫–∞—Ä–∞–Ω–¥–∞—à",emoji:"‚úèÔ∏è"},
    {en:"bag",ru:"—Ä—é–∫–∑–∞–∫",emoji:"üéí"},
  ],
  grammar:{title:"This is",rule:"We name classroom things.",formula:"This is a ‚Ä¶",examples:["This is a book."]}},
  {id:"u2l2",title:"Lesson 2",subtitle:"School subjects",vocabTopic:"Subjects",vocab:[
    {en:"English",ru:"–∞–Ω–≥–ª–∏–π—Å–∫–∏–π",emoji:"üá¨üáß"},
    {en:"Maths",ru:"–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞",emoji:"‚ûó"},
    {en:"Art",ru:"–ò–ó–û",emoji:"üé®"},
    {en:"PE",ru:"—Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä–∞",emoji:"‚öΩ"},
  ],
  grammar:{title:"I like",rule:"We talk about likes.",formula:"I like ‚Ä¶",examples:["I like English."]}},
  {id:"u2l3",title:"Lesson 3",subtitle:"Days",vocabTopic:"Days",vocab:[
    {en:"Monday",ru:"–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",emoji:"üìÖ"},
    {en:"Tuesday",ru:"–≤—Ç–æ—Ä–Ω–∏–∫",emoji:"üìÖ"},
    {en:"Wednesday",ru:"—Å—Ä–µ–¥–∞",emoji:"üìÖ"},
    {en:"Friday",ru:"–ø—è—Ç–Ω–∏—Ü–∞",emoji:"üéâ"},
  ],
  grammar:{title:"On Monday",rule:"We talk about days.",formula:"On Monday, I ‚Ä¶",examples:["On Monday, I have English."]}},
  {id:"u2l4",title:"Lesson 4",subtitle:"Instructions",vocabTopic:"Commands",vocab:[
    {en:"sit down",ru:"—Å–∞–¥–∏—Å—å",emoji:"ü™ë"},
    {en:"stand up",ru:"–≤—Å—Ç–∞–Ω—å",emoji:"üßç"},
    {en:"open your book",ru:"–æ—Ç–∫—Ä–æ–π –∫–Ω–∏–≥—É",emoji:"üìñ"},
    {en:"listen",ru:"—Å–ª—É—à–∞–π",emoji:"üëÇ"},
  ],
  grammar:{title:"Imperatives",rule:"We give commands.",formula:"Sit down.",examples:["Listen!"]}},
  {id:"u2l5",title:"Lesson 5",subtitle:"People at school",vocabTopic:"People",vocab:[
    {en:"teacher",ru:"—É—á–∏—Ç–µ–ª—å",emoji:"üßë‚Äçüè´"},
    {en:"student",ru:"—É—á–µ–Ω–∏–∫",emoji:"üë¶"},
    {en:"class",ru:"–∫–ª–∞—Å—Å",emoji:"üè´"},
    {en:"friend",ru:"–¥—Ä—É–≥",emoji:"ü§ù"},
  ],
  grammar:{title:"This is my‚Ä¶",rule:"We talk about people.",formula:"This is my ‚Ä¶",examples:["This is my teacher."]}},
  {id:"u2l6",title:"Lesson 6",subtitle:"My timetable",vocabTopic:"Timetable",vocab:[
    {en:"lesson",ru:"—É—Ä–æ–∫",emoji:"üìö"},
    {en:"break",ru:"–ø–µ—Ä–µ–º–µ–Ω–∞",emoji:"‚è∏Ô∏è"},
    {en:"today",ru:"—Å–µ–≥–æ–¥–Ω—è",emoji:"üìÖ"},
    {en:"school",ru:"—à–∫–æ–ª–∞",emoji:"üè´"},
  ],
  grammar:{title:"Today I have",rule:"We talk about today.",formula:"Today I have ‚Ä¶",examples:["Today I have Maths."]}},
  {id:"u2l7",title:"Lesson 7",subtitle:"My bag",vocabTopic:"Things",vocab:[
    {en:"notebook",ru:"—Ç–µ—Ç—Ä–∞–¥—å",emoji:"üìì"},
    {en:"ruler",ru:"–ª–∏–Ω–µ–π–∫–∞",emoji:"üìè"},
    {en:"eraser",ru:"–ª–∞—Å—Ç–∏–∫",emoji:"üßΩ"},
    {en:"pencil case",ru:"–ø–µ–Ω–∞–ª",emoji:"üëú"},
  ],
  grammar:{title:"I have got",rule:"We say what we have.",formula:"I have got a ‚Ä¶",examples:["I have got a bag."]}},
  {id:"u2l8",title:"Project",subtitle:"My school",vocabTopic:"Project",vocab:[
    {en:"school",ru:"—à–∫–æ–ª–∞",emoji:"üè´"},
    {en:"class",ru:"–∫–ª–∞—Å—Å",emoji:"üë´"},
    {en:"teacher",ru:"—É—á–∏—Ç–µ–ª—å",emoji:"üßë‚Äçüè´"},
    {en:"friend",ru:"–¥—Ä—É–≥",emoji:"ü§ù"},
  ],
  grammar:{title:"My school",rule:"We describe our school.",formula:"I like my school.",examples:["I like my school."]}},
];

/* ===============================
   Unit 3 ‚Äì People I love
================================ */
const UNIT3_LESSONS = [
  {id:"u3l1",title:"Lesson 1",subtitle:"My family",vocabTopic:"Family",vocab:[
    {en:"mum",ru:"–º–∞–º–∞",emoji:"üë©"},
    {en:"dad",ru:"–ø–∞–ø–∞",emoji:"üë®"},
    {en:"sister",ru:"—Å–µ—Å—Ç—Ä–∞",emoji:"üëß"},
    {en:"brother",ru:"–±—Ä–∞—Ç",emoji:"üë¶"},
  ],
  grammar:{title:"This is my",rule:"We talk about family.",formula:"This is my ‚Ä¶",examples:["This is my mum."]}},
  {id:"u3l2",title:"Lesson 2",subtitle:"Feelings",vocabTopic:"Feelings",vocab:[
    {en:"happy",ru:"—Å—á–∞—Å—Ç–ª–∏–≤—ã–π",emoji:"üòÅ"},
    {en:"sad",ru:"–≥—Ä—É—Å—Ç–Ω—ã–π",emoji:"üò¢"},
    {en:"tired",ru:"—É—Å—Ç–∞–≤—à–∏–π",emoji:"üò¥"},
    {en:"hungry",ru:"–≥–æ–ª–æ–¥–Ω—ã–π",emoji:"üçΩÔ∏è"},
  ],
  grammar:{title:"I am",rule:"We talk about feelings.",formula:"I am ‚Ä¶",examples:["I am happy."]}},
  {id:"u3l3",title:"Lesson 3",subtitle:"Friends",vocabTopic:"Friends",vocab:[
    {en:"friend",ru:"–¥—Ä—É–≥",emoji:"ü§ù"},
    {en:"boy",ru:"–º–∞–ª—å—á–∏–∫",emoji:"üë¶"},
    {en:"girl",ru:"–¥–µ–≤–æ—á–∫–∞",emoji:"üëß"},
    {en:"classmate",ru:"–æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫",emoji:"üè´"},
  ],
  grammar:{title:"We are",rule:"We talk about friends.",formula:"We are friends.",examples:["We are classmates."]}},
  {id:"u3l4",title:"Lesson 4",subtitle:"Pets",vocabTopic:"Pets",vocab:[
    {en:"cat",ru:"–∫–æ—Ç",emoji:"üê±"},
    {en:"dog",ru:"—Å–æ–±–∞–∫–∞",emoji:"üê∂"},
    {en:"fish",ru:"—Ä—ã–±–∫–∞",emoji:"üêü"},
    {en:"bird",ru:"–ø—Ç–∏—Ü–∞",emoji:"üê¶"},
  ],
  grammar:{title:"I have got",rule:"We talk about pets.",formula:"I have got a ‚Ä¶",examples:["I have got a cat."]}},
  {id:"u3l5",title:"Lesson 5",subtitle:"Adjectives",vocabTopic:"Adjectives",vocab:[
    {en:"kind",ru:"–¥–æ–±—Ä—ã–π",emoji:"üíõ"},
    {en:"funny",ru:"–≤–µ—Å—ë–ª—ã–π",emoji:"üòÑ"},
    {en:"smart",ru:"—É–º–Ω—ã–π",emoji:"üß†"},
    {en:"nice",ru:"–º–∏–ª—ã–π",emoji:"üòä"},
  ],
  grammar:{title:"He / She is",rule:"We describe people.",formula:"He is ‚Ä¶",examples:["She is kind."]}},
  {id:"u3l6",title:"Lesson 6",subtitle:"My friends",vocabTopic:"Friends",vocab:[
    {en:"play",ru:"–∏–≥—Ä–∞—Ç—å",emoji:"‚öΩ"},
    {en:"help",ru:"–ø–æ–º–æ–≥–∞—Ç—å",emoji:"ü§ù"},
    {en:"share",ru:"–¥–µ–ª–∏—Ç—å—Å—è",emoji:"üéÅ"},
    {en:"talk",ru:"–≥–æ–≤–æ—Ä–∏—Ç—å",emoji:"üí¨"},
  ],
  grammar:{title:"We like",rule:"We talk about actions.",formula:"We like to ‚Ä¶",examples:["We like to play."]}},
  {id:"u3l7",title:"Lesson 7",subtitle:"My family home",vocabTopic:"Home",vocab:[
    {en:"house",ru:"–¥–æ–º",emoji:"üè†"},
    {en:"room",ru:"–∫–æ–º–Ω–∞—Ç–∞",emoji:"üõèÔ∏è"},
    {en:"kitchen",ru:"–∫—É—Ö–Ω—è",emoji:"üç≥"},
    {en:"bedroom",ru:"—Å–ø–∞–ª—å–Ω—è",emoji:"üõå"},
  ],
  grammar:{title:"There is",rule:"We talk about rooms.",formula:"There is a ‚Ä¶",examples:["There is a kitchen."]}},
  {id:"u3l8",title:"Project",subtitle:"My family poster",vocabTopic:"Project",vocab:[
    {en:"family",ru:"—Å–µ–º—å—è",emoji:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶"},
    {en:"name",ru:"–∏–º—è",emoji:"üè∑Ô∏è"},
    {en:"age",ru:"–≤–æ–∑—Ä–∞—Å—Ç",emoji:"üéÇ"},
    {en:"pet",ru:"–ø–∏—Ç–æ–º–µ—Ü",emoji:"üê∂"},
  ],
  grammar:{title:"My family",rule:"We make a poster.",formula:"This is my ‚Ä¶",examples:["This is my family."]}},
];

  /* ===============================
   Unit 4 ‚Äì Weather
================================ */
const UNIT4_LESSONS = [
  {id:"u4l1",title:"Lesson 1",subtitle:"Weather today",vocabTopic:"Weather",vocab:[
    {en:"sunny",ru:"—Å–æ–ª–Ω–µ—á–Ω–æ",emoji:"‚òÄÔ∏è"},
    {en:"rainy",ru:"–¥–æ–∂–¥–ª–∏–≤–æ",emoji:"üåßÔ∏è"},
    {en:"windy",ru:"–≤–µ—Ç—Ä–µ–Ω–æ",emoji:"üå¨Ô∏è"},
    {en:"cloudy",ru:"–æ–±–ª–∞—á–Ω–æ",emoji:"‚òÅÔ∏è"},
  ],
  grammar:{title:"It‚Äôs ‚Ä¶",rule:"We talk about weather.",formula:"It‚Äôs sunny/rainy.",examples:["It‚Äôs sunny today."]}},
  {id:"u4l2",title:"Lesson 2",subtitle:"Seasons",vocabTopic:"Seasons",vocab:[
    {en:"spring",ru:"–≤–µ—Å–Ω–∞",emoji:"üå∏"},
    {en:"summer",ru:"–ª–µ—Ç–æ",emoji:"üåû"},
    {en:"autumn",ru:"–æ—Å–µ–Ω—å",emoji:"üçÇ"},
    {en:"winter",ru:"–∑–∏–º–∞",emoji:"‚ùÑÔ∏è"},
  ],
  grammar:{title:"In + season",rule:"We talk about seasons.",formula:"In summer, it‚Äôs ‚Ä¶",examples:["In winter, it‚Äôs cold."]}},
  {id:"u4l3",title:"Lesson 3",subtitle:"Temperature",vocabTopic:"Hot & Cold",vocab:[
    {en:"hot",ru:"–∂–∞—Ä–∫–æ",emoji:"üî•"},
    {en:"cold",ru:"—Ö–æ–ª–æ–¥–Ω–æ",emoji:"ü•∂"},
    {en:"warm",ru:"—Ç–µ–ø–ª–æ",emoji:"üå§Ô∏è"},
    {en:"cool",ru:"–ø—Ä–æ—Ö–ª–∞–¥–Ω–æ",emoji:"üßä"},
  ],
  grammar:{title:"It‚Äôs hot/cold",rule:"We talk about temperature.",formula:"It‚Äôs hot.",examples:["It‚Äôs cold today."]}},
  {id:"u4l4",title:"Lesson 4",subtitle:"Clothes",vocabTopic:"Clothes",vocab:[
    {en:"coat",ru:"–ø–∞–ª—å—Ç–æ",emoji:"üß•"},
    {en:"hat",ru:"—à–∞–ø–∫–∞",emoji:"üß¢"},
    {en:"boots",ru:"–±–æ—Ç–∏–Ω–∫–∏",emoji:"üë¢"},
    {en:"umbrella",ru:"–∑–æ–Ω—Ç",emoji:"‚òÇÔ∏è"},
  ],
  grammar:{title:"Put on",rule:"We say what to wear.",formula:"Put on a ‚Ä¶",examples:["Put on a coat."]}},
  {id:"u4l5",title:"Lesson 5",subtitle:"Activities",vocabTopic:"Activities",vocab:[
    {en:"play",ru:"–∏–≥—Ä–∞—Ç—å",emoji:"‚öΩ"},
    {en:"walk",ru:"–≥—É–ª—è—Ç—å",emoji:"üö∂"},
    {en:"swim",ru:"–ø–ª–∞–≤–∞—Ç—å",emoji:"üèä"},
    {en:"stay home",ru:"–±—ã—Ç—å –¥–æ–º–∞",emoji:"üè†"},
  ],
  grammar:{title:"I can",rule:"We talk about abilities.",formula:"I can ‚Ä¶",examples:["I can swim."]}},
  {id:"u4l6",title:"Lesson 6",subtitle:"Weather question",vocabTopic:"Questions",vocab:[
    {en:"what‚Äôs the weather like?",ru:"–∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞?",emoji:"‚ùì"},
    {en:"today",ru:"—Å–µ–≥–æ–¥–Ω—è",emoji:"üìÖ"},
    {en:"outside",ru:"–Ω–∞ —É–ª–∏—Ü–µ",emoji:"üå≥"},
    {en:"now",ru:"—Å–µ–π—á–∞—Å",emoji:"‚è∞"},
  ],
  grammar:{title:"What‚Äôs the weather like?",rule:"We ask about weather.",formula:"What‚Äôs the weather like?",examples:["It‚Äôs sunny."]}},
  {id:"u4l7",title:"Lesson 7",subtitle:"More weather",vocabTopic:"Weather",vocab:[
    {en:"snowy",ru:"—Å–Ω–µ–≥",emoji:"üå®Ô∏è"},
    {en:"stormy",ru:"–±—É—Ä—è",emoji:"‚õàÔ∏è"},
    {en:"foggy",ru:"—Ç—É–º–∞–Ω",emoji:"üå´Ô∏è"},
    {en:"icy",ru:"–ª–µ–¥—è–Ω–æ–π",emoji:"üßä"},
  ],
  grammar:{title:"It‚Äôs ‚Ä¶",rule:"More weather words.",formula:"It‚Äôs snowy.",examples:["It‚Äôs foggy today."]}},
  {id:"u4l8",title:"Project",subtitle:"Weather chart",vocabTopic:"Project",vocab:[
    {en:"sun",ru:"—Å–æ–ª–Ω—Ü–µ",emoji:"‚òÄÔ∏è"},
    {en:"rain",ru:"–¥–æ–∂–¥—å",emoji:"üåßÔ∏è"},
    {en:"wind",ru:"–≤–µ—Ç–µ—Ä",emoji:"üå¨Ô∏è"},
    {en:"snow",ru:"—Å–Ω–µ–≥",emoji:"‚ùÑÔ∏è"},
  ],
  grammar:{title:"My chart",rule:"We make a weather chart.",formula:"Today: sun.",examples:["Today: rain."]}},
];

/* ===============================
   Unit 5 ‚Äì My free time
================================ */
const UNIT5_LESSONS = [
  {id:"u5l1",title:"Lesson 1",subtitle:"Hobbies",vocabTopic:"Hobbies",vocab:[
    {en:"read",ru:"—á–∏—Ç–∞—Ç—å",emoji:"üìñ"},
    {en:"draw",ru:"—Ä–∏—Å–æ–≤–∞—Ç—å",emoji:"üé®"},
    {en:"dance",ru:"—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å",emoji:"üíÉ"},
    {en:"sing",ru:"–ø–µ—Ç—å",emoji:"üé§"},
  ],
  grammar:{title:"I like to",rule:"We talk about hobbies.",formula:"I like to read.",examples:["I like to draw."]}},
  {id:"u5l2",title:"Lesson 2",subtitle:"Sports",vocabTopic:"Sports",vocab:[
    {en:"football",ru:"—Ñ—É—Ç–±–æ–ª",emoji:"‚öΩ"},
    {en:"basketball",ru:"–±–∞—Å–∫–µ—Ç–±–æ–ª",emoji:"üèÄ"},
    {en:"tennis",ru:"—Ç–µ–Ω–Ω–∏—Å",emoji:"üéæ"},
    {en:"run",ru:"–±–µ–≥–∞—Ç—å",emoji:"üèÉ"},
  ],
  grammar:{title:"I play",rule:"We talk about sports.",formula:"I play football.",examples:["I play tennis."]}},
  {id:"u5l3",title:"Lesson 3",subtitle:"Toys",vocabTopic:"Toys",vocab:[
    {en:"ball",ru:"–º—è—á",emoji:"‚öΩ"},
    {en:"doll",ru:"–∫—É–∫–ª–∞",emoji:"ü™Ü"},
    {en:"car",ru:"–º–∞—à–∏–Ω–∫–∞",emoji:"üöó"},
    {en:"game",ru:"–∏–≥—Ä–∞",emoji:"üéÆ"},
  ],
  grammar:{title:"I have got",rule:"We talk about toys.",formula:"I have got a ball.",examples:["I have got a doll."]}},
  {id:"u5l4",title:"Lesson 4",subtitle:"After school",vocabTopic:"Activities",vocab:[
    {en:"homework",ru:"–¥–æ–º–∞—à–∫–∞",emoji:"üìù"},
    {en:"help",ru:"–ø–æ–º–æ–≥–∞—Ç—å",emoji:"ü§ù"},
    {en:"watch TV",ru:"—Å–º–æ—Ç—Ä–µ—Ç—å –¢–í",emoji:"üì∫"},
    {en:"play outside",ru:"–∏–≥—Ä–∞—Ç—å –Ω–∞ —É–ª–∏—Ü–µ",emoji:"üõù"},
  ],
  grammar:{title:"I do",rule:"We talk about routines.",formula:"I do homework.",examples:["I watch TV."]}},
  {id:"u5l5",title:"Lesson 5",subtitle:"Time",vocabTopic:"Time",vocab:[
    {en:"morning",ru:"—É—Ç—Ä–æ",emoji:"üåÖ"},
    {en:"afternoon",ru:"–¥–µ–Ω—å",emoji:"üåá"},
    {en:"evening",ru:"–≤–µ—á–µ—Ä",emoji:"üåÜ"},
    {en:"night",ru:"–Ω–æ—á—å",emoji:"üåô"},
  ],
  grammar:{title:"In the ‚Ä¶",rule:"We talk about time.",formula:"In the morning‚Ä¶",examples:["In the evening, I read."]}},
  {id:"u5l6",title:"Lesson 6",subtitle:"Daily routine",vocabTopic:"Routine",vocab:[
    {en:"play",ru:"–∏–≥—Ä–∞—Ç—å",emoji:"üéÆ"},
    {en:"read",ru:"—á–∏—Ç–∞—Ç—å",emoji:"üìñ"},
    {en:"go",ru:"—Ö–æ–¥–∏—Ç—å",emoji:"üö∂"},
    {en:"sleep",ru:"—Å–ø–∞—Ç—å",emoji:"üò¥"},
  ],
  grammar:{title:"I + verb",rule:"We talk about routine.",formula:"I play.",examples:["I sleep at night."]}},
  {id:"u5l7",title:"Lesson 7",subtitle:"Weekend",vocabTopic:"Weekend",vocab:[
    {en:"Saturday",ru:"—Å—É–±–±–æ—Ç–∞",emoji:"üìÖ"},
    {en:"Sunday",ru:"–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ",emoji:"üìÖ"},
    {en:"park",ru:"–ø–∞—Ä–∫",emoji:"üå≥"},
    {en:"cinema",ru:"–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä",emoji:"üé¨"},
  ],
  grammar:{title:"On Saturday",rule:"We talk about weekend.",formula:"On Sunday‚Ä¶",examples:["On Sunday, I go to the park."]}},
  {id:"u5l8",title:"Project",subtitle:"My hobby",vocabTopic:"Project",vocab:[
    {en:"hobby",ru:"—Ö–æ–±–±–∏",emoji:"‚≠ê"},
    {en:"favourite",ru:"–ª—é–±–∏–º—ã–π",emoji:"üíõ"},
    {en:"like",ru:"–Ω—Ä–∞–≤–∏—Ç—Å—è",emoji:"üëç"},
    {en:"because",ru:"–ø–æ—Ç–æ–º—É —á—Ç–æ",emoji:"‚û°Ô∏è"},
  ],
  grammar:{title:"Because",rule:"We give a reason.",formula:"I like ‚Ä¶ because ‚Ä¶",examples:["I like football because it‚Äôs fun."]}},
];

/* ===============================
   Unit 6 ‚Äì Health
================================ */
const UNIT6_LESSONS = [
  {id:"u6l1",title:"Lesson 1",subtitle:"My body",vocabTopic:"Body",vocab:[
    {en:"head",ru:"–≥–æ–ª–æ–≤–∞",emoji:"üôÇ"},
    {en:"hand",ru:"—Ä—É–∫–∞",emoji:"‚úã"},
    {en:"leg",ru:"–Ω–æ–≥–∞",emoji:"ü¶µ"},
    {en:"eye",ru:"–≥–ª–∞–∑",emoji:"üëÅÔ∏è"},
  ],
  grammar:{title:"I‚Äôve got",rule:"We talk about body.",formula:"I‚Äôve got two hands.",examples:["I‚Äôve got two eyes."]}},
  {id:"u6l2",title:"Lesson 2",subtitle:"Face",vocabTopic:"Face",vocab:[
    {en:"nose",ru:"–Ω–æ—Å",emoji:"üëÉ"},
    {en:"mouth",ru:"—Ä–æ—Ç",emoji:"üëÑ"},
    {en:"ear",ru:"—É—Ö–æ",emoji:"üëÇ"},
    {en:"hair",ru:"–≤–æ–ª–æ—Å—ã",emoji:"üíá"},
  ],
  grammar:{title:"My ‚Ä¶",rule:"We name body parts.",formula:"My hair is ‚Ä¶",examples:["My hair is brown."]}},
  {id:"u6l3",title:"Lesson 3",subtitle:"Healthy food",vocabTopic:"Food",vocab:[
    {en:"apple",ru:"—è–±–ª–æ–∫–æ",emoji:"üçé"},
    {en:"milk",ru:"–º–æ–ª–æ–∫–æ",emoji:"ü•õ"},
    {en:"water",ru:"–≤–æ–¥–∞",emoji:"üíß"},
    {en:"vegetables",ru:"–æ–≤–æ—â–∏",emoji:"ü•¶"},
  ],
  grammar:{title:"I eat / drink",rule:"Food and drinks.",formula:"I eat apples.",examples:["I drink water."]}},
  {id:"u6l4",title:"Lesson 4",subtitle:"Illness",vocabTopic:"Sick",vocab:[
    {en:"cold",ru:"–ø—Ä–æ—Å—Ç—É–¥–∞",emoji:"ü§ß"},
    {en:"headache",ru:"–≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å",emoji:"ü§ï"},
    {en:"toothache",ru:"–∑—É–±–Ω–∞—è –±–æ–ª—å",emoji:"ü¶∑"},
    {en:"fever",ru:"—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞",emoji:"üå°Ô∏è"},
  ],
  grammar:{title:"I‚Äôve got a ‚Ä¶",rule:"We talk about illness.",formula:"I‚Äôve got a headache.",examples:["I‚Äôve got a cold."]}},
  {id:"u6l5",title:"Lesson 5",subtitle:"Doctor",vocabTopic:"Doctor",vocab:[
    {en:"doctor",ru:"–≤—Ä–∞—á",emoji:"üßë‚Äç‚öïÔ∏è"},
    {en:"medicine",ru:"–ª–µ–∫–∞—Ä—Å—Ç–≤–æ",emoji:"üíä"},
    {en:"rest",ru:"–æ—Ç–¥—ã—Ö",emoji:"üõå"},
    {en:"sleep",ru:"—Å–æ–Ω",emoji:"üò¥"},
  ],
  grammar:{title:"You should",rule:"We give advice.",formula:"You should rest.",examples:["You should drink water."]}},
  {id:"u6l6",title:"Lesson 6",subtitle:"Habits",vocabTopic:"Habits",vocab:[
    {en:"wash hands",ru:"–º—ã—Ç—å —Ä—É–∫–∏",emoji:"üßº"},
    {en:"brush teeth",ru:"—á–∏—Å—Ç–∏—Ç—å –∑—É–±—ã",emoji:"ü™•"},
    {en:"exercise",ru:"—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è",emoji:"üèÉ"},
    {en:"eat well",ru:"—Ö–æ—Ä–æ—à–æ –ø–∏—Ç–∞—Ç—å—Å—è",emoji:"ü•ó"},
  ],
  grammar:{title:"I always",rule:"We talk about habits.",formula:"I always wash hands.",examples:["I always brush teeth."]}},
  {id:"u6l7",title:"Lesson 7",subtitle:"Good or bad",vocabTopic:"Health",vocab:[
    {en:"healthy",ru:"–∑–¥–æ—Ä–æ–≤—ã–π",emoji:"üíö"},
    {en:"unhealthy",ru:"–≤—Ä–µ–¥–Ω—ã–π",emoji:"‚ö†Ô∏è"},
    {en:"good",ru:"—Ö–æ—Ä–æ—à–æ",emoji:"‚úÖ"},
    {en:"bad",ru:"–ø–ª–æ—Ö–æ",emoji:"‚ùå"},
  ],
  grammar:{title:"It‚Äôs healthy",rule:"We describe food.",formula:"It‚Äôs healthy.",examples:["Fruit is healthy."]}},
  {id:"u6l8",title:"Project",subtitle:"My health rules",vocabTopic:"Rules",vocab:[
    {en:"drink",ru:"–ø–∏—Ç—å",emoji:"ü•õ"},
    {en:"sleep",ru:"—Å–ø–∞—Ç—å",emoji:"üò¥"},
    {en:"wash",ru:"–º—ã—Ç—å",emoji:"üßº"},
    {en:"eat",ru:"–µ—Å—Ç—å",emoji:"üçé"},
  ],
  grammar:{title:"My rules",rule:"We write rules.",formula:"I should ‚Ä¶",examples:["I should drink water."]}},
];

/* ===============================
   Unit 7 ‚Äì Buildings
================================ */
const UNIT7_LESSONS = [
  {id:"u7l1",title:"Lesson 1",subtitle:"My town",vocabTopic:"Places",vocab:[
    {en:"school",ru:"—à–∫–æ–ª–∞",emoji:"üè´"},
    {en:"park",ru:"–ø–∞—Ä–∫",emoji:"üå≥"},
    {en:"shop",ru:"–º–∞–≥–∞–∑–∏–Ω",emoji:"üõçÔ∏è"},
    {en:"hospital",ru:"–±–æ–ª—å–Ω–∏—Ü–∞",emoji:"üè•"},
  ],
  grammar:{title:"There is",rule:"We talk about places.",formula:"There is a ‚Ä¶",examples:["There is a park."]}},
  {id:"u7l2",title:"Lesson 2",subtitle:"More places",vocabTopic:"Places",vocab:[
    {en:"cinema",ru:"–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä",emoji:"üé¨"},
    {en:"library",ru:"–±–∏–±–ª–∏–æ—Ç–µ–∫–∞",emoji:"üìö"},
    {en:"cafe",ru:"–∫–∞—Ñ–µ",emoji:"‚òï"},
    {en:"bank",ru:"–±–∞–Ω–∫",emoji:"üè¶"},
  ],
  grammar:{title:"It‚Äôs near",rule:"We say where places are.",formula:"It‚Äôs near the ‚Ä¶",examples:["The cafe is near the park."]}},
  {id:"u7l3",title:"Lesson 3",subtitle:"Directions",vocabTopic:"Directions",vocab:[
    {en:"left",ru:"–Ω–∞–ª–µ–≤–æ",emoji:"‚¨ÖÔ∏è"},
    {en:"right",ru:"–Ω–∞–ø—Ä–∞–≤–æ",emoji:"‚û°Ô∏è"},
    {en:"go straight",ru:"–ø—Ä—è–º–æ",emoji:"‚¨ÜÔ∏è"},
    {en:"stop",ru:"—Å—Ç–æ–ø",emoji:"üõë"},
  ],
  grammar:{title:"Go ‚Ä¶",rule:"We give directions.",formula:"Go left.",examples:["Go straight."]}},
  {id:"u7l4",title:"Lesson 4",subtitle:"At the shop",vocabTopic:"Shop",vocab:[
    {en:"bread",ru:"—Ö–ª–µ–±",emoji:"üçû"},
    {en:"milk",ru:"–º–æ–ª–æ–∫–æ",emoji:"ü•õ"},
    {en:"egg",ru:"—è–π—Ü–æ",emoji:"ü•ö"},
    {en:"juice",ru:"—Å–æ–∫",emoji:"üßÉ"},
  ],
  grammar:{title:"I want",rule:"We ask politely.",formula:"I want ‚Ä¶ please.",examples:["I want milk."]}},
  {id:"u7l5",title:"Lesson 5",subtitle:"Transport",vocabTopic:"Transport",vocab:[
    {en:"bus",ru:"–∞–≤—Ç–æ–±—É—Å",emoji:"üöå"},
    {en:"car",ru:"–º–∞—à–∏–Ω–∞",emoji:"üöó"},
    {en:"bike",ru:"–≤–µ–ª–æ—Å–∏–ø–µ–¥",emoji:"üö≤"},
    {en:"walk",ru:"–∏–¥—Ç–∏ –ø–µ—à–∫–æ–º",emoji:"üö∂"},
  ],
  grammar:{title:"I go by",rule:"We talk about transport.",formula:"I go by bus.",examples:["I walk to school."]}},
  {id:"u7l6",title:"Lesson 6",subtitle:"Prepositions",vocabTopic:"Place",vocab:[
    {en:"in",ru:"–≤",emoji:"üì¶"},
    {en:"on",ru:"–Ω–∞",emoji:"üìå"},
    {en:"under",ru:"–ø–æ–¥",emoji:"‚¨áÔ∏è"},
    {en:"next to",ru:"—Ä—è–¥–æ–º",emoji:"‚ÜîÔ∏è"},
  ],
  grammar:{title:"Where is it?",rule:"We say where things are.",formula:"It‚Äôs on the desk.",examples:["It‚Äôs under the chair."]}},
  {id:"u7l7",title:"Lesson 7",subtitle:"My address",vocabTopic:"Address",vocab:[
    {en:"street",ru:"—É–ª–∏—Ü–∞",emoji:"üõ£Ô∏è"},
    {en:"house",ru:"–¥–æ–º",emoji:"üè†"},
    {en:"number",ru:"–Ω–æ–º–µ—Ä",emoji:"üî¢"},
    {en:"city",ru:"–≥–æ—Ä–æ–¥",emoji:"üèôÔ∏è"},
  ],
  grammar:{title:"I live in",rule:"We talk about home.",formula:"I live in ‚Ä¶",examples:["I live in Aktau."]}},
  {id:"u7l8",title:"Project",subtitle:"My town map",vocabTopic:"Map",vocab:[
    {en:"map",ru:"–∫–∞—Ä—Ç–∞",emoji:"üó∫Ô∏è"},
    {en:"place",ru:"–º–µ—Å—Ç–æ",emoji:"üìç"},
    {en:"near",ru:"—Ä—è–¥–æ–º",emoji:"üìå"},
    {en:"far",ru:"–¥–∞–ª–µ–∫–æ",emoji:"üõ∞Ô∏è"},
  ],
  grammar:{title:"My map",rule:"We describe a map.",formula:"The school is near ‚Ä¶",examples:["The park is near the school."]}},
];

/* ===============================
   Unit 8 ‚Äì My holidays
================================ */
const UNIT8_LESSONS = [
  {id:"u8l1",title:"Lesson 1",subtitle:"Months",vocabTopic:"Months",vocab:[
    {en:"January",ru:"—è–Ω–≤–∞—Ä—å",emoji:"‚ùÑÔ∏è"},
    {en:"March",ru:"–º–∞—Ä—Ç",emoji:"üå∏"},
    {en:"June",ru:"–∏—é–Ω—å",emoji:"üåû"},
    {en:"December",ru:"–¥–µ–∫–∞–±—Ä—å",emoji:"üéÑ"},
  ],
  grammar:{title:"In + month",rule:"We talk about months.",formula:"In December ‚Ä¶",examples:["In December, I celebrate."]}},
  {id:"u8l2",title:"Lesson 2",subtitle:"Holidays",vocabTopic:"Holidays",vocab:[
    {en:"birthday",ru:"–¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è",emoji:"üéÇ"},
    {en:"New Year",ru:"–ù–æ–≤—ã–π –≥–æ–¥",emoji:"üéÜ"},
    {en:"holiday",ru:"–∫–∞–Ω–∏–∫—É–ª—ã",emoji:"üéâ"},
    {en:"gift",ru:"–ø–æ–¥–∞—Ä–æ–∫",emoji:"üéÅ"},
  ],
  grammar:{title:"It‚Äôs my ‚Ä¶",rule:"We talk about holidays.",formula:"It‚Äôs my birthday.",examples:["It‚Äôs New Year!"]}},
  {id:"u8l3",title:"Lesson 3",subtitle:"Travel",vocabTopic:"Travel",vocab:[
    {en:"travel",ru:"–ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å",emoji:"‚úàÔ∏è"},
    {en:"train",ru:"–ø–æ–µ–∑–¥",emoji:"üöÜ"},
    {en:"plane",ru:"—Å–∞–º–æ–ª—ë—Ç",emoji:"‚úàÔ∏è"},
    {en:"hotel",ru:"–æ—Ç–µ–ª—å",emoji:"üè®"},
  ],
  grammar:{title:"I want to",rule:"We talk about plans.",formula:"I want to travel.",examples:["I want to go by plane."]}},
  {id:"u8l4",title:"Lesson 4",subtitle:"At the beach",vocabTopic:"Beach",vocab:[
    {en:"sea",ru:"–º–æ—Ä–µ",emoji:"üåä"},
    {en:"sand",ru:"–ø–µ—Å–æ–∫",emoji:"üèñÔ∏è"},
    {en:"sun",ru:"—Å–æ–ª–Ω—Ü–µ",emoji:"‚òÄÔ∏è"},
    {en:"swim",ru:"–ø–ª–∞–≤–∞—Ç—å",emoji:"üèä"},
  ],
  grammar:{title:"I can",rule:"We talk about holiday activities.",formula:"I can swim.",examples:["I can swim in the sea."]}},
  {id:"u8l5",title:"Lesson 5",subtitle:"Winter holidays",vocabTopic:"Winter",vocab:[
    {en:"snow",ru:"—Å–Ω–µ–≥",emoji:"‚ùÑÔ∏è"},
    {en:"skate",ru:"–∫–∞—Ç–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—å–∫–∞—Ö",emoji:"‚õ∏Ô∏è"},
    {en:"ski",ru:"–ª—ã–∂–∏",emoji:"üéø"},
    {en:"cold",ru:"—Ö–æ–ª–æ–¥–Ω–æ",emoji:"ü•∂"},
  ],
  grammar:{title:"It‚Äôs cold",rule:"We talk about winter.",formula:"It‚Äôs snowy.",examples:["It‚Äôs cold in winter."]}},
  {id:"u8l6",title:"Lesson 6",subtitle:"Past simple",vocabTopic:"Past",vocab:[
    {en:"was",ru:"–±—ã–ª/–±—ã–ª–∞",emoji:"‚è≥"},
    {en:"were",ru:"–±—ã–ª–∏",emoji:"‚è≥"},
    {en:"happy",ru:"—Å—á–∞—Å—Ç–ª–∏–≤—ã–π",emoji:"üòÅ"},
    {en:"fun",ru:"–≤–µ—Å–µ–ª–æ",emoji:"üéà"},
  ],
  grammar:{title:"I was / We were",rule:"We talk about past.",formula:"I was happy.",examples:["We were at home."]}},
  {id:"u8l7",title:"Lesson 7",subtitle:"Holiday activities",vocabTopic:"Activities",vocab:[
    {en:"visit",ru:"–ø–æ—Å–µ—â–∞—Ç—å",emoji:"üìç"},
    {en:"play",ru:"–∏–≥—Ä–∞—Ç—å",emoji:"üéÆ"},
    {en:"eat",ru:"–µ—Å—Ç—å",emoji:"üçΩÔ∏è"},
    {en:"take photos",ru:"—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å",emoji:"üì∏"},
  ],
  grammar:{title:"I like to",rule:"We talk about holidays.",formula:"I like to play.",examples:["I like to take photos."]}},
  {id:"u8l8",title:"Project",subtitle:"My holiday story",vocabTopic:"Story",vocab:[
    {en:"place",ru:"–º–µ—Å—Ç–æ",emoji:"üìç"},
    {en:"with",ru:"—Å",emoji:"üë´"},
    {en:"was",ru:"–±—ã–ª/–±—ã–ª–∞",emoji:"‚è≥"},
    {en:"great",ru:"–∫–ª–∞—Å—Å–Ω–æ",emoji:"‚≠ê"},
  ],
  grammar:{title:"My story",rule:"We tell a short story.",formula:"I was in ‚Ä¶ It was great.",examples:["I was at the sea. It was great."]}},
];

// Units 2‚Äì8 placeholder
  const UNITS = [
  {unit:1, title:"Unit 1 ‚Äî Hello English!", lessons: UNIT1_LESSONS},
  {unit:2, title:"Unit 2 ‚Äî My school", lessons: UNIT2_LESSONS},
  {unit:3, title:"Unit 3 ‚Äî People I love", lessons: UNIT3_LESSONS},
  {unit:4, title:"Unit 4 ‚Äî Weather", lessons: UNIT4_LESSONS},
  {unit:5, title:"Unit 5 ‚Äî My free time", lessons: UNIT5_LESSONS},
  {unit:6, title:"Unit 6 ‚Äî Health", lessons: UNIT6_LESSONS},
  {unit:7, title:"Unit 7 ‚Äî Buildings", lessons: UNIT7_LESSONS},
  {unit:8, title:"Unit 8 ‚Äî My holidays", lessons: UNIT8_LESSONS},
];

const STORAGE_KEY = "aib_voc_3g_state_v1";

/* ===============================
   STATE
================================ */
let state = loadState();
function loadState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) return JSON.parse(raw);
  }catch(e){}
  return {
    user: null,
    starsByLesson: {},
    teacherLog: []
  };
}
function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
function nowStr(){ return new Date().toLocaleString(); }
function sumStars(){ return Object.values(state.starsByLesson || {}).reduce((a,b)=>a+(+b||0),0); }

/* ===============================
   ROUTER
================================ */
const app = document.getElementById("app");
let route = {page:"auth"};

function go(page, params={}){
  route = {page, ...params};
  render();
}

/* ===============================
   AUTH HELPERS
================================ */
function validStudentLogin(login){
  if(!login) return false;
  const m = login.trim().match(/^3EL(\d{1,2})$/i);
  if(!m) return false;
  const n = parseInt(m[1],10);
  return n>=1 && n<=MAX_L;
}

/* ===============================
   SPEAK
================================ */
function speak(text){
  try{
    if(!("speechSynthesis" in window)) return alert("Speech is not supported on this device.");
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "en-US";
    u.rate = 0.95;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(u);
  }catch(e){}
}

/* ===============================
   RENDER
================================ */
function render(){
  if(route.page==="auth") return renderAuth();
  if(!state.user) return renderAuth();
  if(route.page==="menu") return renderMenu();
  if(route.page==="unit") return renderUnit(route.unit);
  if(route.page==="lesson") return renderLesson(route.unit, route.lessonId);
  if(route.page==="chat") return renderChat();
  if(route.page==="journal") return renderJournal();
  renderMenu();
}

/* ===============================
   AUTH UI
================================ */
function renderAuth(){
  app.innerHTML = `
    <div class="hero">
      <div class="logoWrap">
        <img src="ai-bayan.png" alt="AI Bayan" onerror="this.style.display='none'; this.parentElement.innerHTML='üëß'; this.parentElement.style.fontSize='70px'; this.parentElement.style.color='#0b6f78'">
      </div>
      <div class="brandTitle">AI Bayan</div>
      <div class="brandSub">Vocabulary ‚Ä¢ Grade 3</div>
    </div>

    <div class="panel auth">
      <div class="authBox">
        <div class="field">
          <div class="label">Login</div>
          <input class="input" id="login" placeholder=""/>
        </div>
        <div class="field">
          <div class="label">PIN</div>
          <input class="input" id="pin" placeholder="" type="password"/>
        </div>

        <div class="row">
          <button class="btn btnPrimary" onclick="handleLogin()">Enter</button>
          <button class="btn btnGhost" onclick="demoFill()">Quick fill</button>
        </div>

        <div class="note">No hints on screen.<br/>Teacher and student access are separated.</div>
      </div>
    </div>
  `;
}
function demoFill(){
  document.getElementById("login").value = "3EL1";
  document.getElementById("pin").value = STUDENT_PIN;
}
function handleLogin(){
  const login = (document.getElementById("login").value || "").trim();
  const pin = (document.getElementById("pin").value || "").trim();

  if(pin === TEACHER_PIN){
    state.user = {type:"teacher", login:"TEACHER"};
    state.teacherLog.push({ts: nowStr(), login:"TEACHER", action:"login"});
    saveState();
    go("menu");
    return;
  }

  if(pin === STUDENT_PIN && validStudentLogin(login)){
    state.user = {type:"student", login: login.toUpperCase()};
    state.teacherLog.push({ts: nowStr(), login: state.user.login, action:"student_login"});
    saveState();
    go("menu");
    return;
  }
  alert("Wrong login or PIN.");
}

/* ===============================
   MENU UI
================================ */
function renderMenu(){
  const who = state.user.type==="teacher" ? "Teacher" : state.user.login;
  app.innerHTML = `
    <div class="hero">
      <div class="logoWrap">
        <img src="ai-bayan.png" alt="AI Bayan" onerror="this.style.display='none'; this.parentElement.innerHTML='üëß'; this.parentElement.style.fontSize='70px'; this.parentElement.style.color='#0b6f78'">
      </div>
      <div class="brandTitle">ENGLISH WITH AI BAYAN</div>
      <div class="brandSub">AI Bayan Vocabulary ‚Äî Grade 3</div>
    </div>

    <div class="panel">
      <div class="helloCard">
        <div class="big">Hello, ${escapeHtml(who)}!</div>
        <div class="starsLine">Total stars in all lessons: ${sumStars()} ‚≠ê</div>
      </div>

      <div class="menuList">
        ${UNITS.map(u=>`
          <div class="menuBtn" onclick="go('unit',{unit:${u.unit}})">
            üìò ${escapeHtml(u.title)}
            <small>Open Unit ${u.unit}</small>
          </div>
        `).join("")}
      </div>

      <div class="bottomRow">
        <div class="miniBtn" onclick="go('chat')">üí¨ AI Bayan Chat</div>
        <div class="miniBtn" onclick="go('journal')">üè´ Teacher‚Äôs Journal</div>
        <div class="miniBtn" onclick="logout()">üö™ Exit</div>
      </div>
    </div>

    <div class="footerLine">Students: 3EL1‚Äì3EL15 | Student PIN 2844 | Teacher PIN 3244</div>
  `;
}
function logout(){
  state.teacherLog.push({ts: nowStr(), login: state.user?.login || "-", action:"logout"});
  state.user = null;
  saveState();
  go("auth");
}

/* ===============================
   UNIT UI
================================ */
function renderUnit(unitNum){
  const u = UNITS.find(x=>x.unit===unitNum);
  if(!u) return go("menu");

  if(!u.lessons || u.lessons.length===0){
    app.innerHTML = `
      <div class="lessonHero">
        <div class="lessonBanner">
          <div>
            <div class="title">${escapeHtml(u.title)}</div>
            <div class="sub">Lessons will be added</div>
          </div>
          <div class="badge">‚≠ê Total: ${sumStars()}</div>
        </div>
      </div>

      <div class="lessonPanel">
        <div class="sectionTitle">‚ÑπÔ∏è Unit is empty now</div>
        <p style="margin:0;font-weight:800;color:#3d6167">
          Send photos of Unit ${unitNum} (8 lessons) and I will fill it exactly like Unit 1.
        </p>

        <div class="navRow">
          <button class="btn btnBlue" onclick="go('menu')">‚Üê Back</button>
          <button class="btn btnGhost" onclick="go('chat')">üí¨ AI Bayan Chat</button>
        </div>
      </div>

      <div class="footerLine">Students: 3EL1‚Äì3EL15 | Student PIN 2844 | Teacher PIN 3244</div>
    `;
    return;
  }

  app.innerHTML = `
    <div class="lessonHero">
      <div class="lessonBanner">
        <div>
          <div class="title">${escapeHtml(u.title)}</div>
          <div class="sub">Choose a lesson</div>
        </div>
        <div class="badge">‚≠ê Total: ${sumStars()}</div>
      </div>
    </div>

    <div class="lessonPanel">
      <div class="menuList" style="margin-top:0">
        ${u.lessons.map((L,idx)=>`
          <div class="menuBtn" onclick="go('lesson',{unit:${u.unit}, lessonId:'${L.id}'})">
            üìó Lesson ${idx+1} ‚Äî ${escapeHtml(L.subtitle)}
            <small>${escapeHtml(L.vocabTopic)}</small>
          </div>
        `).join("")}
      </div>

      <div class="bottomRow">
        <div class="miniBtn" onclick="go('menu')">‚Üê Main menu</div>
        <div class="miniBtn" onclick="go('chat')">üí¨ AI Bayan Chat</div>
        <div class="miniBtn" onclick="go('journal')">üè´ Teacher‚Äôs Journal</div>
      </div>
    </div>

    <div class="footerLine">Students: 3EL1‚Äì3EL15 | Student PIN 2844 | Teacher PIN 3244</div>
  `;
}

/* ===============================
   LESSON UI (Unit 1)
================================ */
function renderLesson(unitNum, lessonId){
  const u = UNITS.find(x=>x.unit===unitNum);
  if(!u) return go("menu");
  const L = (u.lessons||[]).find(x=>x.id===lessonId);
  if(!L) return go("unit",{unit:unitNum});

  const stars = state.starsByLesson[lessonId] || 0;

  app.innerHTML = `
    <div class="lessonHero">
      <div class="lessonBanner">
        <div>
          <div class="title">${escapeHtml(u.title)} ‚Äî ${escapeHtml(L.title)}</div>
          <div class="sub">${escapeHtml(L.subtitle)}</div>
        </div>
        <div class="badge">‚≠ê You have ${stars} in this lesson</div>
      </div>
    </div>

    <div class="lessonPanel">
      <div style="text-align:center;font-weight:1000;color:#0a4a52;margin-top:6px">
        ${escapeHtml(L.vocabTopic)}
      </div>

      <div class="sectionTitle">üß† VOCABULARY ‚Äî Picture Dictionary</div>
      <div style="margin:-2px 0 10px;color:#4b666c;font-weight:800">
        Tap ‚ÄúSay it‚Äù to hear AI Bayan say the word in English.
      </div>

      <div class="vocabGrid">
        ${L.vocab.map((w)=>`
          <div class="vCard">
            <div class="vIcon">${escapeHtml(w.emoji || "‚≠ê")}</div>
            <div class="vWord">${escapeHtml(w.en)}</div>
            <div class="vRu">${escapeHtml(w.ru)}</div>
            <button class="sayBtn" onclick="speak('${jsStr(w.en)}')">üîä Say it</button>
          </div>
        `).join("")}
      </div>

      <div class="sectionTitle">üìò GRAMMAR ‚Äî Key Rule</div>
      <div class="ruleBox">
        <h3>${escapeHtml(L.grammar.title)}</h3>
        <p>${escapeHtml(L.grammar.rule)}</p>
        <p><b>Formula:</b> ${escapeHtml(L.grammar.formula)}</p>
        <p><b>Examples:</b></p>
        <ul>
          ${L.grammar.examples.map(e=>`<li>${escapeHtml(e)}</li>`).join("")}
        </ul>
      </div>

      <div class="sectionTitle">üìù WORKSHEETS (4 tasks)</div>
      ${renderWorksheetsHTML(L)}

      <div class="navRow">
        <button class="btn btnBlue" onclick="go('unit',{unit:${unitNum}})">‚Üê Back</button>
        <button class="btn btnGreen" onclick="saveResult('${lessonId}')">Save Result ‚úì</button>
        <button class="btn btnGhost" onclick="printLesson()">üñ® Print</button>
      </div>
    </div>

    <div class="footerLine">Students: 3EL1‚Äì3EL15 | Student PIN 2844 | Teacher PIN 3244</div>
  `;
}

/* ===============================
   WORKSHEETS
   ‚úÖ Worksheet 2 = Matching with emojis for ALL vocabulary
================================ */
function renderWorksheetsHTML(L){
  const words = L.vocab.map(v => (v.en||"").replace(/\?$/,"").toLowerCase());
  const emojis = L.vocab.map(v => v.emoji || "‚≠ê");

  const w0 = words[0] || "hello";
  const w1 = words[1] || "goodbye";
  const w2 = words[2] || "fine";
  const w3 = words[3] || "name";

  // Worksheet 1 ‚Äî Missing letters (ALL words)
  const miss = words.map(w=>{
    if(!w) return "";
    if(w.length<3) return w;
    const idx = Math.max(1, Math.floor(w.length/2));
    return w.slice(0,idx) + "_" + w.slice(idx+1);
  });

  // Worksheet 2 ‚Äî options = ALL words mixed
  const optsAll = shuffle(words.filter(Boolean));

  // Worksheet 3 ‚Äî 3 clues
  const clues = [
    {clue:`Word 1:`, ans:w0},
    {clue:`Word 2:`, ans:w1},
    {clue:`Word 3:`, ans:(w2.includes("fine")?w2:w2 || "fine")},
  ];

  // Worksheet 4 ‚Äî 3 sentences
  const sent = [
    {text:`I say ____ (word 1).`, ans:w0, options: shuffle([w0,w1,w2].filter(Boolean))},
    {text:`I say ____ (word 2).`, ans:w1, options: shuffle([w1,w0,w3].filter(Boolean))},
    {text:`This is ____ (word 3).`, ans:(w2||w0), options: shuffle([w2,w0,w1].filter(Boolean))},
  ];

  return `
    <div class="wsBox" id="ws1">
      <h4>Worksheet 1 ‚Äî Missing letters</h4>
      <p>Write the missing letters. (Use small letters.)</p>
      ${miss.map((m,i)=>`
        <div class="qRow">
          <div class="q">${i+1}) ${escapeHtml(m)} ‚Üí</div>
          <input type="text" data-ans="${escapeHtml(words[i]||'')}" class="ws1in"/>
        </div>
      `).join("")}
      <div class="checkRow">
        <button class="checkBtn" onclick="checkWS1()">Check ‚úì</button>
        <div class="scoreTxt" id="ws1score">Correct: 0 / ${miss.length}</div>
      </div>
    </div>

    <div class="wsBox" id="ws2">
      <h4>Worksheet 2 ‚Äî Matching (emoji + word)</h4>
      <p>Look at the picture. Choose the correct word.</p>

      <div style="display:flex;flex-direction:column;gap:10px">
        ${words.map((w,i)=>`
          <div class="qRow" style="align-items:stretch">
            <div class="q" style="width:30px">${i+1})</div>

            <div style="
              width:64px;height:64px;border-radius:16px;
              background:#f0fbfc;border:2px solid rgba(12,106,115,.18);
              display:flex;align-items:center;justify-content:center;
              font-size:36px;flex:0 0 auto;">
              ${escapeHtml(emojis[i] || "‚≠ê")}
            </div>

            <select class="select ws2sel" data-ans="${escapeHtml(w)}" style="flex:1;min-width:180px">
              <option value="">--choose--</option>
              ${optsAll.map(o=>`<option value="${escapeHtml(o)}">${escapeHtml(o)}</option>`).join("")}
            </select>
          </div>
        `).join("")}
      </div>

      <div class="checkRow">
        <button class="checkBtn" onclick="checkWS2()">Check ‚úì</button>
        <div class="scoreTxt" id="ws2score">Correct: 0 / ${words.length}</div>
      </div>
    </div>

    <div class="wsBox" id="ws3">
      <h4>Worksheet 3 ‚Äî Write the word</h4>
      <p>Write the word (3 items).</p>
      ${clues.map((c,i)=>`
        <div class="qRow">
          <div class="q">${i+1}) ${escapeHtml(c.clue)}</div>
          <input type="text" class="ws3in" data-ans="${escapeHtml(c.ans)}"/>
        </div>
      `).join("")}
      <div class="checkRow">
        <button class="checkBtn" onclick="checkWS3()">Check ‚úì</button>
        <div class="scoreTxt" id="ws3score">Correct: 0 / ${clues.length}</div>
      </div>
    </div>

    <div class="wsBox" id="ws4">
      <h4>Worksheet 4 ‚Äî Choose the correct word</h4>
      <p>Choose the correct word to complete each sentence.</p>
      ${sent.map((s,i)=>`
        <div class="qRow">
          <div class="q">${i+1}) ${escapeHtml(s.text)}</div>
          <select class="select ws4sel" data-ans="${escapeHtml(s.ans)}">
            <option value="">--choose--</option>
            ${s.options.map(o=>`<option value="${escapeHtml(o)}">${escapeHtml(o)}</option>`).join("")}
          </select>
        </div>
      `).join("")}
      <div class="checkRow">
        <button class="checkBtn" onclick="checkWS4()">Check ‚úì</button>
        <div class="scoreTxt" id="ws4score">Correct: 0 / ${sent.length}</div>
      </div>
    </div>
  `;
}

/* ===============================
   CHECKERS + STARS
================================ */
function markInput(el, ok){
  el.style.borderColor = ok ? "rgba(26,160,108,.7)" : "rgba(214,40,40,.7)";
  el.style.background = ok ? "#f1fff7" : "#fff3f3";
}

function checkWS1(){
  const inputs = document.querySelectorAll(".ws1in");
  let c=0;
  inputs.forEach(inp=>{
    const ans = (inp.dataset.ans||"").trim().toLowerCase();
    const v = (inp.value||"").trim().toLowerCase();
    const ok = v===ans;
    if(ok) c++;
    markInput(inp, ok);
  });
  document.getElementById("ws1score").textContent = `Correct: ${c} / ${inputs.length}`;
}

function checkWS2(){
  const sels = document.querySelectorAll(".ws2sel");
  let c=0;
  sels.forEach(sel=>{
    const ans=(sel.dataset.ans||"").trim().toLowerCase();
    const v=(sel.value||"").trim().toLowerCase();
    const ok = v===ans;
    if(ok) c++;
    markInput(sel, ok);
  });
  document.getElementById("ws2score").textContent = `Correct: ${c} / ${sels.length}`;
}

function checkWS3(){
  const inputs = document.querySelectorAll(".ws3in");
  let c=0;
  inputs.forEach(inp=>{
    const ans=(inp.dataset.ans||"").trim().toLowerCase();
    const v=(inp.value||"").trim().toLowerCase();
    const ok=v===ans;
    if(ok) c++;
    markInput(inp, ok);
  });
  document.getElementById("ws3score").textContent = `Correct: ${c} / ${inputs.length}`;
}

function checkWS4(){
  const sels = document.querySelectorAll(".ws4sel");
  let c=0;
  sels.forEach(sel=>{
    const ans=(sel.dataset.ans||"").trim().toLowerCase();
    const v=(sel.value||"").trim().toLowerCase();
    const ok=v===ans;
    if(ok) c++;
    markInput(sel, ok);
  });
  document.getElementById("ws4score").textContent = `Correct: ${c} / ${sels.length}`;
}

function calcLessonStars(){
  let total=0;

  document.querySelectorAll(".ws1in").forEach(inp=>{
    const ans=(inp.dataset.ans||"").trim().toLowerCase();
    const v=(inp.value||"").trim().toLowerCase();
    if(v && v===ans) total++;
  });

  document.querySelectorAll(".ws2sel").forEach(sel=>{
    const ans=(sel.dataset.ans||"").trim().toLowerCase();
    const v=(sel.value||"").trim().toLowerCase();
    if(v && v===ans) total++;
  });

  document.querySelectorAll(".ws3in").forEach(inp=>{
    const ans=(inp.dataset.ans||"").trim().toLowerCase();
    const v=(inp.value||"").trim().toLowerCase();
    if(v && v===ans) total++;
  });

  document.querySelectorAll(".ws4sel").forEach(sel=>{
    const ans=(sel.dataset.ans||"").trim().toLowerCase();
    const v=(sel.value||"").trim().toLowerCase();
    if(v && v===ans) total++;
  });

  return total;
}

function saveResult(lessonId){
  const stars = calcLessonStars();
  state.starsByLesson[lessonId] = stars;

  state.teacherLog.push({
    ts: nowStr(),
    login: state.user?.login || "-",
    action: "save_result",
    lessonId,
    stars
  });

  saveState();
  alert(`Saved! Stars in this lesson: ${stars} ‚≠ê`);
  render();
}

/* ===============================
   PRINT
================================ */
function printLesson(){ window.print(); }

/* ===============================
   CHAT (offline demo)
================================ */
function renderChat(){
  app.innerHTML = `
    <div class="lessonHero">
      <div class="lessonBanner">
        <div>
          <div class="title">AI Bayan Chat</div>
          <div class="sub">Ask simple questions</div>
        </div>
        <div class="badge">‚≠ê Total: ${sumStars()}</div>
      </div>
    </div>

    <div class="lessonPanel">
      <div class="sectionTitle">üí¨ Chat</div>

      <div id="chatBox" style="background:#f6fbfc;border:2px solid rgba(12,106,115,.18);border-radius:18px;padding:12px;min-height:220px;">
        <div style="font-weight:900;color:#2f6168">AI Bayan:</div>
        <div style="margin:6px 0 12px;font-weight:800;color:#375f66">Hello! Ask me: ‚ÄúWhat‚Äôs your name?‚Äù or ‚ÄúHow old are you?‚Äù</div>
      </div>

      <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;">
        <input id="chatIn" class="input" style="flex:1;min-width:220px" placeholder="Type here..." />
        <button class="btn btnPrimary" style="min-width:140px" onclick="sendChat()">Send</button>
      </div>

      <div class="navRow">
        <button class="btn btnBlue" onclick="go('menu')">‚Üê Back</button>
        <button class="btn btnGhost" onclick="go('journal')">üè´ Teacher‚Äôs Journal</button>
      </div>
    </div>

    <div class="footerLine">Students: 3EL1‚Äì3EL15 | Student PIN 2844 | Teacher PIN 3244</div>
  `;
}
function sendChat(){
  const inp = document.getElementById("chatIn");
  const msg = (inp.value||"").trim();
  if(!msg) return;

  const box = document.getElementById("chatBox");
  box.innerHTML += `
    <div style="margin-top:10px">
      <div style="font-weight:900;color:#0a4a52">${escapeHtml(state.user?.login || "You")}:</div>
      <div style="font-weight:800;color:#375f66">${escapeHtml(msg)}</div>
    </div>
  `;

  const m = msg.toLowerCase();
  let reply = "Good! üòä";
  if(m.includes("name")) reply = "My name is AI Bayan.";
  else if(m.includes("how old")) reply = "I‚Äôm ten.";
  else if(m.includes("from")) reply = "I‚Äôm from Kazakhstan.";
  else if(m.includes("hello")) reply = "Hello!";

  box.innerHTML += `
    <div style="margin-top:10px">
      <div style="font-weight:900;color:#2f6168">AI Bayan:</div>
      <div style="font-weight:800;color:#375f66">${escapeHtml(reply)}</div>
    </div>
  `;
  box.scrollTop = box.scrollHeight;
  inp.value = "";
}

/* ===============================
   TEACHER JOURNAL
================================ */
function renderJournal(){
  const isTeacher = state.user?.type==="teacher";
  const rows = (state.teacherLog||[]).slice().reverse();

  app.innerHTML = `
    <div class="lessonHero">
      <div class="lessonBanner">
        <div>
          <div class="title">Teacher‚Äôs Journal</div>
          <div class="sub">${isTeacher ? "Full access" : "View only"}</div>
        </div>
        <div class="badge">‚≠ê Total: ${sumStars()}</div>
      </div>
    </div>

    <div class="lessonPanel">
      <div class="sectionTitle">üìí Logs</div>

      <div style="overflow:auto;border:2px solid rgba(12,106,115,.18);border-radius:18px;">
        <table style="width:100%;border-collapse:collapse;font-weight:800;color:#0a4a52">
          <thead>
            <tr style="background:#f0fbfc">
              <th style="padding:10px;border-bottom:2px solid rgba(0,0,0,.06);text-align:left">Time</th>
              <th style="padding:10px;border-bottom:2px solid rgba(0,0,0,.06);text-align:left">Login</th>
              <th style="padding:10px;border-bottom:2px solid rgba(0,0,0,.06);text-align:left">Action</th>
              <th style="padding:10px;border-bottom:2px solid rgba(0,0,0,.06);text-align:left">Lesson</th>
              <th style="padding:10px;border-bottom:2px solid rgba(0,0,0,.06);text-align:left">Stars</th>
            </tr>
          </thead>
          <tbody>
            ${rows.map(r=>{
              if(!isTeacher && r.login !== state.user.login) return "";
              return `
                <tr>
                  <td style="padding:10px;border-bottom:1px solid rgba(0,0,0,.06);color:#365f66">${escapeHtml(r.ts||"")}</td>
                  <td style="padding:10px;border-bottom:1px solid rgba(0,0,0,.06)">${escapeHtml(r.login||"")}</td>
                  <td style="padding:10px;border-bottom:1px solid rgba(0,0,0,.06)">${escapeHtml(r.action||"")}</td>
                  <td style="padding:10px;border-bottom:1px solid rgba(0,0,0,.06)">${escapeHtml(r.lessonId||"")}</td>
                  <td style="padding:10px;border-bottom:1px solid rgba(0,0,0,.06)">${escapeHtml(String(r.stars ?? ""))}</td>
                </tr>
              `;
            }).join("")}
          </tbody>
        </table>
      </div>

      ${isTeacher ? `
        <div class="bottomRow">
          <div class="miniBtn" onclick="resetAll()">üßπ Reset all data</div>
        </div>
      ` : ``}

      <div class="navRow">
        <button class="btn btnBlue" onclick="go('menu')">‚Üê Back</button>
        <button class="btn btnGhost" onclick="go('chat')">üí¨ AI Bayan Chat</button>
      </div>
    </div>

    <div class="footerLine">Students: 3EL1‚Äì3EL15 | Student PIN 2844 | Teacher PIN 3244</div>
  `;
}
function resetAll(){
  if(!confirm("Reset all saved data?")) return;
  state.starsByLesson = {};
  state.teacherLog.push({ts: nowStr(), login:"TEACHER", action:"reset_all"});
  saveState();
  render();
}

/* ===============================
   UTIL
================================ */
function escapeHtml(s){
  return String(s).replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));
}
function jsStr(s){
  return String(s).replace(/\\/g,"\\\\").replace(/'/g,"\\'");
}
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

/* ===============================
   START
================================ */
go(state.user ? "menu" : "auth");
</script>
</body>
</html>
